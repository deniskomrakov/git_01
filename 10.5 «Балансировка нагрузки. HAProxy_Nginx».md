# Домашнее задание к занятию 10.5 «Балансировка нагрузки. HAProxy/Nginx» - Денис Комраков


### Инструкция по выполнению домашнего задания

1. Сделайте fork [репозитория c Шаблоном решения](https://github.com/netology-code/sys-pattern-homework) к себе в Github и переименуйте его по названию или номеру занятия, например, https://github.com/имя-вашего-репозитория/gitlab-hw или https://github.com/имя-вашего-репозитория/8-03-hw).
2. Выполните клонирование данного репозитория к себе на ПК с помощью команды `git clone`.
3. Выполните домашнее задание и заполните у себя локально этот файл README.md:
   - впишите вверху название занятия и вашу фамилию и имя
   - в каждом задании добавьте решение в требуемом виде (текст/код/скриншоты/ссылка)
   - для корректного добавления скриншотов воспользуйтесь инструкцией ["Как вставить скриншот в шаблон с решением"](https://github.com/netology-code/sys-pattern-homework/blob/main/screen-instruction.md)
   - при оформлении используйте возможности языка разметки md (коротко об этом можно посмотреть в [инструкции по MarkDown](https://github.com/netology-code/sys-pattern-homework/blob/main/md-instruction.md))
4. После завершения работы над домашним заданием сделайте коммит (`git commit -m "comment"`) и отправьте его на Github (`git push origin`);
5. Для проверки домашнего задания преподавателем в личном кабинете прикрепите и отправьте ссылку на решение в виде md-файла в вашем Github.
6. Любые вопросы по выполнению заданий спрашивайте в чате учебной группы и/или в разделе “Вопросы по заданию” в личном кабинете.

Желаем успехов в выполнении домашнего задания!

---

### Задание 1

Что такое балансировка нагрузки и зачем она нужна? 

*Приведите ответ в свободной форме.*

Балансировка назгрузки (load balancing) - это процесс распределения нагрузки на пул серверов. Распределение происходит на Layer 4 (Транспортной уровне) или Layer 7 (Прикладном уровне) модели OSI.

Балансировка нагрузки необходима для сокращения времени простоя, для масштабирования - если нагрузка растет можно маштабировать вертикально, поменять конфигурацию сервера на более мощную и быстро добавить ресурсов в облачный сервер. Для горизонтального маштабирования, при котором растет количество серверов.
Отказоустойчивость - в случае отказа одного из серверов, балансировщик распределит трафик между остальными элементами инфраструктуры. Еще важная функция балансировщика это защита от DDoS атак. Ее обеспечивает задержка ответа, когда фоновые сервера не видят клиента до подтверждения по TCP.

---

### Задание 2

Чем отличаются алгоритмы балансировки Round Robin и Weighted Round Robin? В каких случаях каждый из них лучше применять? 

*Приведите ответ в свободной форме.*

Round Robin - циклическое планирование, это алгоритм планирования, в котором время равномерно распределяется между заданиями без приоритета. Запросы направляются поочередно на каждый сервер, сначала первый, потом второй и так далее. И так проходит цикл по кругу начиная с первого и до последнего сервера. В этом случае сервера из пула могут быть не связаны с друг другом через DNS. И при использовании этого алгоритм запросы могут перенаправляться на любые машины. Недостатком этого метода является нерациональное распределение ресурсов.

Если в пуле все сервера одинаковой мощности, то Round Robin алгорит подойдет лучше всех.

Weighted Round Robin - это такой же алгоритм как и Round Robin, но дополнительно этот алгоритм учитывает мощность/производительность серверов. Чем более мощнее сервер, соответственно больше этот сервер может обрабатывать запросов чем другой сервер в этом пуле.

Этот алгоритм подходит для ситуаций когда сервера обладают различной производительностью.

---

### Задание 3

Установите и запустите Haproxy.

*Приведите скриншот systemctl status haproxy, где будет видно, что Haproxy запущен.*

![image](https://user-images.githubusercontent.com/121336770/222905942-d8c0c3bc-7a2c-46ac-9f07-0998b6531b8a.png)

---

### Задание 4

Установите и запустите Nginx.

*Приведите скриншот systemctl status nginx, где будет видно, что Nginx запущен.*

![image](https://user-images.githubusercontent.com/121336770/222906587-8e9e1531-5534-451a-80e4-bf86eec311c6.png)

---

### Задание 5

Настройте Nginx на виртуальной машине таким образом, чтобы при запросе:

`curl http://localhost:8088/ping`

он возвращал в ответе строчку: 

"nginx is configured correctly".

*Приведите конфигурации настроенного Nginx сервиса и скриншот результата выполнения команды curl http://localhost:8088/ping.*

![image](https://user-images.githubusercontent.com/121336770/222917511-5d48498f-e55d-4c34-96ca-034444c90c96.png)

![image](https://user-images.githubusercontent.com/121336770/222917720-7a051c3d-4f7e-45b6-b3f1-2d9f26e06550.png)

---

## Задания со звёздочкой*

Эти задания дополнительные. Их выполнять не обязательно. На зачёт это не повлияет. Вы можете их выполнить, если хотите глубже разобраться в материале.

---

### Задание 6*

Настройте Haproxy таким образом, чтобы при ответе на запрос:

`curl http://localhost:8080/`

он проксировал его в Nginx на порту 8088, который был настроен в задании 5 и возвращал от него ответ: 

"nginx is configured correctly". 

*Приведите конфигурации настроенного Haproxy и скриншоты результата выполнения команды curl http://localhost:8080/.*

![image](https://user-images.githubusercontent.com/121336770/222955196-ea931a51-3106-48a0-b466-aa1532a09bfd.png)

![image](https://user-images.githubusercontent.com/121336770/222955104-dafa83af-8ba9-4cb8-9518-ab1a661d052e.png)

